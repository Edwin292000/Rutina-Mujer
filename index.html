<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rutina Adaptada al Ciclo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
</head>

<body class="bg-gray-100 text-gray-800">
    <div id="app" class="max-w-4xl mx-auto p-6 space-y-6">
        <h1 class="text-3xl font-bold text-center">Rutina de Ejercicios Adaptada al Ciclo</h1>

        <!-- Configuración de ciclo -->
        <div class="bg-white p-4 rounded shadow">
            <h2 class="text-xl font-semibold mb-2">Configuración del Ciclo</h2>
            <div class="space-y-3">
                <div>
                    <label class="font-medium">Duración del ciclo (días):</label>
                    <input type="number" v-model.number="ciclo" min="20" max="35" class="border p-2 rounded w-24 ml-2">
                </div>
                <div>
                    <label class="font-medium">Último periodo</label>
                    <input type="date" v-model="ultimoPeriodo" class="border p-2 rounded ml-2">
                    <!-- Boton para recalcular -->
                    <button @click="calcularFase" class="bg-blue-500 text-white p-2 rounded ml-2">Recalcular</button>
                </div>
            </div>
        </div>

        <!-- Selección de fase -->
        <div class="bg-white p-4 rounded shadow">
            <h2 class="text-xl font-semibold mb-2">Seleccionar Fase</h2>
            <select v-model="faseSeleccionada" class="border p-2 rounded w-full">
                <option value="">-- Selecciona fase o calcula --</option>
                <option v-for="fase in fases" :value="fase.nombre">
                    {{ fase.nombre }}
                </option>
            </select>
            <p class="mt-2 text-gray-600 text-sm">
                Si no seleccionas manualmente, se calculará con la fecha de tu último periodo.
            </p>

        </div>

        <!-- Selección de día -->
        <div class="bg-white p-4 rounded shadow">
            <h2 class="text-xl font-semibold mb-2">Seleccionar Día de la Rutina</h2>
            <select v-model="diaSeleccionado" class="border p-2 rounded w-full">
                <option value="">-- Selecciona un día --</option>
                <option v-for="(rutina, idx) in rutinas" :value="idx">
                    Día {{ idx+1 }} - {{ rutina.dia }}
                </option>
            </select>
        </div>

        <!-- Rutina mostrada -->
        <div v-if="mostrarRutina" class="bg-white p-4 rounded shadow space-y-4">
            <h2 class="text-2xl font-bold">{{ faseActual }}</h2>
            <h3 class="text-xl font-bold">Rutina - {{ rutinas[diaSeleccionado].dia }}</h3>
            <div v-for="ej in rutinas[diaSeleccionado].ejercicios"
                :class="['p-4 rounded border', ejercicioRestringido(ej) ? 'bg-red-100 border-red-400 text-red-700' : 'bg-green-50 border-green-300']">
                <h3 class="text-lg font-semibold">{{ ej.nombre }}</h3>
                <p class="text-sm">Series/Reps: {{ ej.series }}</p>
                <img :src="ej.imagen" alt="Imagen ejercicio" class="w-40 my-2 rounded shadow">
                <a :href="ej.video" target="_blank" class="text-blue-600 underline">Ver Video</a>
            </div>
        </div>

        <!-- Información de fases (accordion) -->
        <div class="bg-white p-4 rounded shadow">
            <h2 class="text-xl font-semibold mb-2">Información sobre las fases</h2>
            <div v-for="fase in fases" :key="fase.nombre" class="mb-2 border rounded">
                <button @click="fase.abierta = !fase.abierta" class="w-full text-left p-2 font-medium"
                    :class="faseActual === fase.nombre ? 'bg-blue-100' : 'bg-gray-100'">
                    {{ fase.nombre }}
                </button>
                <div v-if="fase.abierta" class="p-2 text-sm space-y-2">
                    <p>{{ fase.descripcion }}</p>
                    <p class="font-semibold">Nutrición:</p>
                    <p>{{ fase.nutricion }}</p>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>